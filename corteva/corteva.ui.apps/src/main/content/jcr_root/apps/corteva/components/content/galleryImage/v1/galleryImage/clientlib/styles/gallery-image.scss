.str03-gallery-image {
  $imageWidth: 80vw;
  $marginLeft: $content-padding-desktop;
  $gap: 2vw;
  $duration: 700ms;
  $easing: cubic-bezier(0.44, -0.07, 0.5, 1.04);
  overflow: hidden;

  .band-content {
    width: 100vw;
    max-width: 100vw;
    margin-left: -$marginLeft;
    position: relative;
    height: auto;
    overflow: hidden;
    @media screen and (max-width: $mobile) {
      margin-left: -5vw;
    }
  }
  .images {
    margin-top: 40px;
    padding-bottom: 50px;
    counter-reset: gallery;
    height: auto;
    font-size: 0;
    letter-spacing: 0;
    white-space: nowrap;
    transition: transform $duration $easing;
    padding-left: $content-padding-desktop;

    @media screen and (max-width: 767px) {
      padding-bottom: 10px;
      padding-left: 4vw;
      margin-top: 0;
      -webkit-overflow-scrolling: touch;
      -webkit-scroll-snap-type: mandatory;
      -webkit-scroll-snap-points-x: repeat($imageWidth);
      scroll-snap-type: mandatory;
      scroll-snap-points-x: repeat($imageWidth);

      overflow: auto;
    }

    /*  Gallery items: */
    > img,
    > picture {
      max-width: $imageWidth;
    }
    .item {
      width: $imageWidth;
      height: auto;
      display: inline-block;
      vertical-align: middle;
      margin: 0 $gap 0 0;
      @media screen and (max-width: $mobile) {
        margin-right: 15px;
        vertical-align: top;
      }
      @media screen and (max-width: 767px) {
        width: 93vw;
      }
      counter-increment: gallery;
      position: relative;
      z-index: 3;
      -webkit-scroll-snap-coordinate: 50% 50%;
      scroll-snap-align: center;

      img,
      picture {
        width: 100%;
        height: auto;
        max-height: 80vh;
        transition: all $duration $easing;
        object-fit: cover;

        @media screen and (min-width: $mobile) {
          filter: brightness(50%);
          transform: scale(0.95);
        }

        position: relative;
        z-index: 3;
      }

      picture {
        display: block;
      }

      @media screen and (min-width: $mobile) {
        &.active img,
        &.active picture {
          filter: brightness(100%);
          transform: none;
        }
      }

      p {
        font-size: rem(14px);
        line-height: rem(26px);
        display: inline-block;
        width: 90%;
        white-space: normal;
        padding-top: 20px;
        transition: opacity $duration 0ms $easing;
        @media screen and (min-width: $mobile) {
          opacity: 0;
          transform: translateY(0%);
          font-size: rem(13px);
          line-height: rem(22px);
        }
      }

      &:after {
        display: inline-block;
        content: counter(gallery) "/" attr(data-total);
        line-height: 16px;
        font-size: $font-m;
        letter-spacing: normal;
        float: right;
        padding: 20px 0 0;
        transition: opacity $duration 0ms $easing;
        @media screen and (min-width: $mobile) {
          transition: opacity $duration 0ms $easing;
          opacity: 0;
          transform: translateY(0%);
        }
      }

      &.active p,
      &.active:after {
        opacity: 1;
        transition-delay: ($duration / 2);
      }
    }

    $scrollOffset: ($imageWidth + $gap);

    @for $i from 2 to 99 {
      $n: ($i - 1);
      $a: $scrollOffset * $n * -1;
      &.active-#{$i} {
        -webkit-transform: translateX(#{$a});
        transform: translateX(#{$a});
      }
    }
  }

  /* When you're on the last slide, fade out the next arrow */
  .images.end ~ .gallery-next {
    display: none;
  }

  /* When you're on the first slide, fade out the back arrow */
  .images.start ~ .gallery-prev {
    display: none;
  }

  .images.start ~ .gallery-next,
  .images.start ~ .gallery-prev {
    &:focus {
      outline: 2px solid $nav-button-border;
      -webkit-filter: none;
      filter: none;
    }
  }

  button {
    width: 4.2vw;
    height: 100%;
    position: absolute;
    z-index: 4;
    top: 0;
    left: 0;
    color: $base;
    display: none;

    outline: none;
    border: 0;
    padding: 0;
    margin: 0;
    cursor: pointer;
    user-select: none;
    font-size: 0;
    transition: opacity $duration ease;
    background: $foundation-primary url("../vectors/right-arrow-white.svg") 33% center
      no-repeat;

    @media screen and (min-width: $mobile) {
      display: block;
    }

    &.gallery-next {
      left: inherit;
      right: 0;
    }

    &.gallery-prev {
      transform: rotate(180deg);
    }
  }
}
